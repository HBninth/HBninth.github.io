```
man core
```

下面的叙述基于对上面 manual 的理解：

**产生**

某些信号会导致进程结束，并产生内存转储文件 (core dump) ,它包含了进程结束时的进程内存镜像。

具体的信号可以参考

```
man 7 singal
```

**用途**

帮助进行 debug : )

**设置**

进程可以通过设置资源软限制 `RLIMIT_CORE` 来限制产生的 core 文件大小，更多关于限制信息可以参考

```
man getrlimit
```

也可以在 shell 里手动设置：

```
ulimit -c unlimited
```

**使用方法**

假设是 test 这个程序导致了 core 产生。

```
# 当前目录下要有 test 和 core
gdb ./test ./core
```

**不会产生 core 的特殊情况**

```
进程不具有写 core 文件的权限（默认情况下， core 文件就叫做 core ，并产生在当前工作目录下）。具体来说，比如这个进程对要存放 core 的目录不具有写权限，或者已经有一个同名文件存在，且进程对那个文件不具有写权限或那个文件不是常规文件 (regular file) 。
```

```
有同名文件存在，且这个文件是常规文件，进程可写这个文件，但是有至少一个硬链接链接到了这个文件。
```

```
文件系统没有足够剩余空间；或者 inode 值超出范围；或者文件系统以只读方式挂载；或者当前用户达到了磁盘限额。
```

```
core 要被创建到的目录还不存在。
```

```
当前进程的 RLIMIT_CORE 或者 RLIMIT_FSIZE 限制为 0 。
```

```
进程执行的二进制程序没有启用可读许可（个人理解是进程不允许外部把它的内存空间转储出来）。
```

```
进程在执行一个带有 SUID 标志位的程序，且程序的用户组和进程的用户组不同。
```

```
从 Linux 3.7 往后，内核在编译过程中进行 configure 时没有带 CONFIG_COREDUMP 选项。
```

另外，如果进程调用 `madvise` 时启用了 `MADV_DONTDUMP` 标志，则地址空间的特定部分可能不包含在 core 中。

**core 文件命名**